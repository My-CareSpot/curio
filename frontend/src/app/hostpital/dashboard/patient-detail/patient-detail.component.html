<div class="content-inner-wrapper">
  <h2>Patient Detail</h2>

  <div class="set_availability_btn">
    <div class="btn-se">
      <!-- <button
        type="submit"
        class="btn btn-add-con"
        [routerLink]="['/dashboard/consult']"
        routerLinkActive="router-link-active"
      >
        Consult
      </button> -->
    </div>
  </div>
  <div class="form-section card">
    <div class="row">
      <div class="col-sm-3 imagePic">
        <div class="profile-pic">
          <img src="{{ finalURL }}" alt="" class="ImageNow" />
        </div>
        <div class="edit-profile">
          <input class="fileU" type="file" (change)="uploadImage($event)" />
          <mat-icon style="color: cornflowerblue; cursor: pointer;"
            >border_color</mat-icon
          >
        </div>
      </div>

      <div class="col-sm-9">
        <div class="head">
          <button class="btn-update" (click)="updateUser()">Update</button>
          <button class="btn-update" (click)="changePasswordDialog()">
            Change Password
          </button>
        </div>

        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <!-- <label for="InputEmail">Email address</label> -->
              <div class="row">
                <div class="col-sm-3">
                  <span class="label-bold">Patient Name : </span>
                </div>
                <div class="col-sm-9">
                  <span
                    >{{ patientInfo?.firstName }} {{ patientInfo?.middleName }}
                    {{ patientInfo?.lastName }}
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12">
            <div class="form-group">
              <!-- <label for="InputPassword">Password</label> -->
              <div class="row">
                <div class="col-sm-3">
                  <span class="label-bold">Contact: </span>
                </div>
                <div class="col-sm-9">
                  <span>{{ patientInfo?.phoneNumber }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12">
            <div class="form-group">
              <!-- <label for="InputEmail">Email address</label> -->
              <div class="row">
                <div class="col-sm-3">
                  <span class="label-bold">Email address : </span>
                </div>
                <div class="col-sm-9">
                  <span>{{ patientInfo?.email }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <mat-tab-group>
      <mat-tab label="Family History">
        <div class="familyWrappers">
          <div class="mat-elevation-z8">
            <div class="col-sm-12 text-right">
              <button
                style="margin-top: 15px;"
                type="button"
                (click)="openAddFamilyDialog()"
                class="btn btn-add-con"
              >
                + Add Family History
              </button>
            </div>
            <table
              id="familyTables"
              mat-table
              [dataSource]="familyHistoryDataList"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="diagnosis">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Diagnosis
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.diagnosis }}
                </td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="firstName">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  First Name
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.firstName }}
                </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Last Name
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.lastName }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="ageofdiagnosis">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Age Of Diagnosis
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.ageofdiagnose }}
                </td>
              </ng-container>
              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Note
                </th>
                <td mat-cell *matCellDef="let element">{{ element.note }}</td>
              </ng-container>
              <ng-container matColumnDef="relationship">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Relationship
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.relationship }}
                </td>
              </ng-container>
              <ng-container matColumnDef="dateofbirth">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  DOB
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.dateofbirth | date: "mediumDate" }}
                </td>
              </ng-container>
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Action
                </th>
                <td mat-cell *matCellDef="let element">
                  <i
                    class="fa fa-pencil-square-o edit-icon"
                    (click)="openEditFamily(element)"
                    aria-hidden="true"
                  ></i>

                  <i
                    class="fa fa-trash delete-icon"
                    (click)="deleteFamilyAlert(element._id)"
                  ></i>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
            </table>

            <mat-paginator
              [length]="familyHistoryDataLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Medical History">
        <div class="familyWrappers">
          <div class="mat-elevation-z8">
            <div class="col-sm-12 text-right">
              <button
                style="margin-top: 15px;"
                type="button"
                (click)="openAddMedicalDialog()"
                class="btn btn-add-con"
              >
                + Add Medical History
              </button>
            </div>
            <table
              id="medicalTables"
              mat-table
              [dataSource]="medicalHistoryDatatList"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="diagnosis">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Diagnosis
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.diagnosis }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="ageofdiagnosis">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Age Of Diagnosis
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.ageofdiagnose }}
                </td>
              </ng-container>
              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Note
                </th>
                <td mat-cell *matCellDef="let element">{{ element.note }}</td>
              </ng-container>
              <ng-container matColumnDef="allergies">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Allergies
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.allergies }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Action
                </th>
                <td mat-cell *matCellDef="let element">
                  <i
                    class="fa fa-pencil-square-o edit-icon"
                    (click)="openEditMedical(element)"
                    aria-hidden="true"
                  ></i>

                  <i
                    class="fa fa-trash delete-icon"
                    (click)="deleteMedicalAlert(element._id)"
                  ></i>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns3"></tr>
            </table>

            <mat-paginator
              [length]="familyHistoryDataLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Dosage">
        <div class="col-sm-12 text-right">
          <button
            style="margin-top: 15px;"
            type="button"
            (click)="openDialogforAddDosage()"
            class="btn btn-add-con"
          >
            + Add Dosage
          </button>
        </div>
        <br />

        <div class="dosage_section">
          <div class="table-responsive">
            <table
              mat-table
              [dataSource]="dataSource1"
              class="mat-elevation-z8 conditions_alignment_tab"
              id="dosageTable"
              matSort
            >
              <ng-container matColumnDef="medicineName">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  Medicine Name
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.medicineName }}
                </td>
              </ng-container>

              <ng-container matColumnDef="startDate">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  Start Date
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.startdate | date: "mediumDate" }}
                </td>
              </ng-container>

              <ng-container matColumnDef="endDate">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  End Date
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.enddate | date: "mediumDate" }}
                </td>
              </ng-container>

              <ng-container matColumnDef="isMorning">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  Morning
                </th>
                <td mat-cell *matCellDef="let element">
                  <span
                    *ngIf="element.isMorning == ''"
                    class="material-icons icon-image-preview red"
                    >clear</span
                  >
                  <span
                    *ngIf="element.isMorning == true"
                    class="material-icons icon-image-preview green"
                    >done</span
                  >
                </td>
              </ng-container>

              <ng-container matColumnDef="isAfternoon">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  Afternoon
                </th>
                <td mat-cell *matCellDef="let element">
                  <span
                    *ngIf="element.isAfternoon == ''"
                    class="material-icons icon-image-preview red"
                    >clear</span
                  >
                  <span
                    *ngIf="element.isAfternoon == true"
                    class="material-icons icon-image-preview green"
                    >done</span
                  >
                </td>
              </ng-container>

              <ng-container matColumnDef="isEvening">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  mat-sort-header
                  class="headersTab"
                >
                  Evening
                </th>
                <td mat-cell *matCellDef="let element">
                  <span
                    *ngIf="element.isEvening == ''"
                    class="material-icons icon-image-preview red"
                    >clear</span
                  >
                  <span
                    *ngIf="element.isEvening == true"
                    class="material-icons icon-image-preview green"
                    >done</span
                  >
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns1"></tr>
            </table>

            <mat-paginator
              [length]="dosageLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Medication">
        <div class="familyWrappers">
          <div class="mat-elevation-z8">
            <div class="col-sm-12 text-right">
              <button
                style="margin-top: 15px;"
                type="button"
                (click)="openAddMedicationDialog()"
                class="btn btn-add-con"
                style="white-space: nowrap;"
              >
                + Add Medication History
              </button>
            </div>
            <table
              id="medicationTable"
              mat-table
              [dataSource]="medicationHistoryDataList"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="drug">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Drug
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.drug }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="strength">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Strength
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.strength }}
                </td>
              </ng-container>
              <ng-container matColumnDef="dose">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Dose
                </th>
                <td mat-cell *matCellDef="let element">{{ element.dose }}</td>
              </ng-container>
              <ng-container matColumnDef="medicationroute">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Medication Route
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.medicationroute }}
                </td>
              </ng-container>
              <ng-container matColumnDef="direction">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Direction
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.direction }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Action
                </th>
                <td mat-cell *matCellDef="let element">
                  <i
                    class="fa fa-pencil-square-o edit-icon"
                    (click)="openEditMedication(element)"
                    aria-hidden="true"
                  ></i>

                  <i
                    class="fa fa-trash delete-icon"
                    (click)="deleteMedicationAlert(element._id)"
                  ></i>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns4"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns4"></tr>
            </table>

            <mat-paginator
              [length]="medicationHistoryDataLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Social History">
        <div class="familyWrappers">
          <div class="mat-elevation-z8">
            <div class="col-sm-12 text-right">
              <button
                style="margin-top: 15px;"
                type="button"
                (click)="openAddSocialDialog()"
                class="btn btn-add-con"
                style="white-space: nowrap;"
              >
                + Add Social History
              </button>
            </div>
            <table
              id="medicationTable"
              mat-table
              [dataSource]="socialHistoryDataList"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="alcohol">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Alcohol
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.alcohol }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="tobaco">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Tobaco
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.tobaco }}
                </td>
              </ng-container>
              <ng-container matColumnDef="smoking">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Smoking
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.smoking }}
                </td>
              </ng-container>
              <ng-container matColumnDef="drugs">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Drugs
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.drugs }}
                </td>
              </ng-container>
              <ng-container matColumnDef="travel">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Travel
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.travel }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Action
                </th>
                <td mat-cell *matCellDef="let element">
                  <i
                    class="fa fa-pencil-square-o edit-icon"
                    (click)="openEditSocial(element)"
                    aria-hidden="true"
                  ></i>

                  <i
                    class="fa fa-trash delete-icon"
                    (click)="deleteSocialAlert(element._id)"
                  ></i>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns5"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns5"></tr>
            </table>

            <mat-paginator
              [length]="socialHistoryDataLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Immunization History">
        <div class="familyWrappers">
          <div class="mat-elevation-z8">
            <div class="col-sm-12 text-right">
              <button
                style="margin-top: 15px;"
                type="button"
                (click)="openAddImmunizationDialog()"
                class="btn btn-add-con"
                style="white-space: nowrap;"
              >
                + Add Immunization
              </button>
            </div>
            <table
              id="medicationTable"
              mat-table
              [dataSource]="immunizationHistoryDataList"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="vaccine">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Vaccine
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.vaccine }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Date
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.date | date: "mediumDate" }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="familyTable">
                  Action
                </th>
                <td mat-cell *matCellDef="let element">
                  <i
                    class="fa fa-pencil-square-o edit-icon"
                    (click)="openEditImmunization(element)"
                    aria-hidden="true"
                  ></i>

                  <i
                    class="fa fa-trash delete-icon"
                    (click)="deleteImmunizationAlert(element._id)"
                  ></i>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns6"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns6"></tr>
            </table>

            <mat-paginator
              [length]="socialHistoryDataLength"
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 25, 100]"
              showFirstLastButtons
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<div class="overlay" *ngIf="isEditFamily">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay"><h3>Family History</h3></div>
    <form [formGroup]="familyHistoryForm">
      <div class="formArea">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>RelationShip</mat-label>
            <mat-select formControlName="relationship">
              <mat-option *ngFor="let item of relationshipList" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>First Name </mat-label>
            <input
              matInput
              placeholder="First Name"
              formControlName="firstName"
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Last Name </mat-label>
            <input
              matInput
              placeholder="Last Name"
              formControlName="lastName"
            />
          </mat-form-field>
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Diagnosis </mat-label>
            <input
              matInput
              placeholder="Diagnosis"
              formControlName="diagnosis"
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Age of diagnose </mat-label>
            <input matInput placeholder="Age" formControlName="ageofdiagnose" />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field class="w-100">
            <mat-label> Date Of Birth </mat-label>
            <input
              matInput
              [matDatepicker]="picker1"
              (click)="picker.open()"
              formControlName="dateofbirth"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker1"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Note </mat-label>
            <input matInput placeholder="Note" formControlName="note" />
          </mat-form-field>
        </div>
      </div>
      <div>
        <button
          mat-button
          [disabled]="familyHistoryForm.invalid"
          (click)="submitFamilyHistory(familyHistoryForm.value)"
          *ngIf="!isUpdateButton"
        >
          Submit
        </button>
        <button
          mat-button
          [disabled]="familyHistoryForm.invalid"
          (click)="updateFamilyHistory(familyHistoryForm.value)"
          *ngIf="isUpdateButton"
        >
          Update
        </button>
        <button mat-button (click)="cancelDialog()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
<div class="overlay" *ngIf="isEditImmunization">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Immunization History</h3>
    </div>
    <form [formGroup]="immunizationHistoryForm">
      <ng-template matStepLabel>Immunizatin History</ng-template>
      <div class="formArea">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Vaccine Name</mat-label>
            <input
              matInput
              placeholder="Last name, First name"
              formControlName="vaccine"
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field class="w-100">
            <mat-label> Vaccination Date </mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              (click)="picker.open()"
              formControlName="date"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

      <div>
        <button
          mat-button
          [disabled]="immunizationHistoryForm.invalid"
          (click)="submitImmunizationHistory(immunizationHistoryForm.value)"
          *ngIf="!isUpdateButton"
        >
          Submit
        </button>
        <button
          mat-button
          [disabled]="immunizationHistoryForm.invalid"
          (click)="updateImmunizationHistory(immunizationHistoryForm.value)"
          *ngIf="isUpdateButton"
        >
          Update
        </button>
        <button mat-button (click)="cancelDialog()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
<div class="overlay" *ngIf="isEditMedical">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Medical History</h3>
    </div>
    <form [formGroup]="medicalHistoryForm">
      <div class="formArea">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Diagnosis </mat-label>
            <input
              matInput
              placeholder="Diagnosis"
              formControlName="diagnosis"
              required
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Allergies </mat-label>
            <input
              matInput
              placeholder="Allergies"
              formControlName="allergies"
              required
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Age of diagnose </mat-label>
            <input
              matInput
              placeholder="Age"
              formControlName="ageofdiagnose"
              required
            />
          </mat-form-field>
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Note </mat-label>
            <input
              matInput
              placeholder="Note"
              formControlName="note"
              required
            />
          </mat-form-field>
        </div>
      </div>
      <div>
        <button
          mat-button
          [disabled]="medicalHistoryForm.invalid"
          (click)="submitMedicalHistory(medicalHistoryForm.value)"
          *ngIf="!isUpdateButton"
        >
          Submit
        </button>
        <button
          mat-button
          [disabled]="medicalHistoryForm.invalid"
          (click)="updateMedicalHistory(medicalHistoryForm.value)"
          *ngIf="isUpdateButton"
        >
          Update
        </button>
        <button mat-button (click)="cancelDialog()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
<div class="overlay" *ngIf="isEditMedication">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Medication History</h3>
    </div>
    <form [formGroup]="medicationHistoryForm">
      <div class="formArea">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Drug</mat-label>
            <input matInput placeholder="Drug name" formControlName="drug" />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Strength </mat-label>
            <input matInput placeholder="100mg" formControlName="strength" />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Dose</mat-label>
            <input matInput placeholder="Dose" formControlName="dose" />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Medication Route</mat-label>
            <input
              matInput
              placeholder="Oral/Injection"
              formControlName="medicationroute"
            />
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Direction</mat-label>
            <input
              matInput
              placeholder="2 times a day"
              formControlName="direction"
            />
          </mat-form-field>
        </div>
      </div>
      <div>
        <button
          mat-button
          [disabled]="medicationHistoryForm.invalid"
          (click)="submitMedicationHistory(medicationHistoryForm.value)"
          *ngIf="!isUpdateButton"
        >
          Submit
        </button>
        <button
          mat-button
          [disabled]="medicationHistoryForm.invalid"
          (click)="updateMedicationHistory(medicationHistoryForm.value)"
          *ngIf="isUpdateButton"
        >
          Update
        </button>
        <button mat-button (click)="cancelDialog()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
<div class="overlay" *ngIf="isEditSocial">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Social History</h3>
    </div>
    <form [formGroup]="socialHistoryForm">
      <div class="formArea">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Alcohol Consumption</mat-label>
            <mat-select formControlName="alcohol">
              <mat-option *ngFor="let item of frequencies" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Smoking Frequency</mat-label>
            <mat-select formControlName="smoking">
              <mat-option *ngFor="let item of frequencies" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Drugs Consumption</mat-label>
            <mat-select formControlName="drugs">
              <mat-option *ngFor="let item of frequencies" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Tobaco Consumption</mat-label>
            <mat-select formControlName="tobaco">
              <mat-option *ngFor="let item of frequencies" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
          <mat-form-field>
            <mat-label>Travels</mat-label>
            <mat-select formControlName="travel">
              <mat-option *ngFor="let item of frequencies" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div>
        <button
          mat-button
          [disabled]="socialHistoryForm.invalid"
          (click)="submitSocialHistory(socialHistoryForm.value)"
          *ngIf="!isUpdateButton"
        >
          Submit
        </button>
        <button
          mat-button
          [disabled]="socialHistoryForm.invalid"
          (click)="updateSocialHistory(socialHistoryForm.value)"
          *ngIf="isUpdateButton"
        >
          Update
        </button>
        <button mat-button (click)="cancelDialog()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>

<div class="overlay" *ngIf="isEditUser">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Update User</h3>
    </div>
    <form [formGroup]="updateUserForm" style="padding: 5px;">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>First Name </mat-label>
          <input
            matInput
            placeholder="First Name"
            formControlName="firstName"
            required
          />
        </mat-form-field>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Middle Name </mat-label>
          <input
            matInput
            placeholder="Middle Name"
            formControlName="middleName"
            required
          />
        </mat-form-field>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Last Name </mat-label>
          <input
            matInput
            placeholder="Last Name"
            formControlName="lastName"
            required
          />
        </mat-form-field>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Email </mat-label>
          <input
            matInput
            placeholder="someon@example.com"
            formControlName="email"
            required
          />
        </mat-form-field>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Contact </mat-label>
          <input
            matInput
            placeholder="Contact"
            formControlName="phoneNumber"
            required
          />
        </mat-form-field>
      </div>

      <div>
        <button
          class="btn-update"
          [disabled]="updateUserForm.invalid"
          (click)="updateUserDetails(updateUserForm.value)"
        >
          Save
        </button>
        <button class="btn-update" (click)="cancelDialog()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<div class="overlay" *ngIf="isChangePassword">
  <div class="maincontent col-lg-5 col-md-5 col-sm-12">
    <div class="headerOverlay">
      <h3>Change Password</h3>
    </div>
    <form [formGroup]="changePasswordForm" style="padding: 5px;">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Enter Password </mat-label>
          <input
            matInput
            placeholder="Password"
            formControlName="password"
            required
          />
          <div
            *ngIf="password.invalid && (password.dirty || password.touched)"
            class="alert alert-danger"
          >
            <div *ngIf="password.errors.required">
              Password is required.
            </div>
            <div *ngIf="password.errors.minlength">
              Password must be at least 8 characters long.
            </div>
            <div *ngIf="password.errors.pattern">
              Password must be alphanumeric.
            </div>
          </div>
        </mat-form-field>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>Confirm Password </mat-label>
          <input
            matInput
            type="password"
            placeholder="Confirm Password"
            formControlName="confirmpassword"
            required
          />
        </mat-form-field>
      </div>
      <div
        *ngIf="showPasswordError"
        style="color: red; font-size: 12px; padding-left: 15px;"
      >
        Password do not match
      </div>

      <div>
        <button
          class="btn-update"
          [disabled]="isValidForm"
          (click)="changePassword(changePasswordForm.value)"
        >
          Change
        </button>
        <button class="btn-update" (click)="cancelDialog()">Cancel</button>
      </div>
    </form>
  </div>
</div>
