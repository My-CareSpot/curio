<div class="content-inner-wrapper patient-registartion-wrapper">
  <div class="container">
    <div class="card">
      <div class="text-center">
        <img src="../../../../assets/img/Logo.svg" />
        <h4>Welcome User!</h4>
        <p>Please fill below details to continue.</p>
      </div>
    </div>
    <h2>Add Patient</h2>
    <mat-horizontal-stepper [linear]="isLinear" #stepper>
      <mat-step [stepControl]="basicDetailForm">
        <form [formGroup]="basicDetailForm">
          <ng-template matStepLabel>Basic Details</ng-template>
          <div class="formArea">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  placeholder="First name"
                  formControlName="firstName"
                  required
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Middle Name</mat-label>
                <input
                  matInput
                  placeholder="Middle Name"
                  formControlName="middleName"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  placeholder="Last name"
                  formControlName="lastName"
                  required
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Contact Number</mat-label>
                <input
                  matInput
                  placeholder="Contact"
                  formControlName="phoneNumber"
                  required
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Email</mat-label>
                <input
                  matInput
                  placeholder="someone@example.com"
                  formControlName="email"
                  required
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Profession</mat-label>
                <input
                  matInput
                  placeholder="Profession"
                  formControlName="profession"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Password</mat-label>
                <input
                  matInput
                  type="password"
                  placeholder="xxxxxx"
                  formControlName="password"
                  required
                />
                <div
                  *ngIf="
                    password.invalid && (password.dirty || password.touched)
                  "
                  class="alert alert-danger"
                >
                  <div *ngIf="password.errors.required">
                    Password is required.
                  </div>
                  <div *ngIf="password.errors.minlength">
                    Password must be at least 8 characters long.
                  </div>
                  <div *ngIf="password.errors.pattern">
                    Password must be alphanumeric.
                  </div>
                </div>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Select Country</mat-label>
                <mat-select formControlName="phoneCountry">
                  <mat-option
                    *ngFor="let item of countriesList"
                    [value]="item.code"
                  >
                    {{ item.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Gender</mat-label>
                <mat-select formControlName="gender">
                  <mat-option *ngFor="let item of genderList" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div>
            <button
              [disabled]="basicDetailForm.invalid"
              mat-button
              matStepperNext
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="medicalHistoryForm">
        <form [formGroup]="medicalHistoryForm">
          <ng-template matStepLabel>Medical History</ng-template>
          <div class="formArea">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Diagnosis </mat-label>
                <input
                  matInput
                  placeholder="Diagnosis"
                  formControlName="diagnosis"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Allergies </mat-label>
                <input
                  matInput
                  placeholder="Allergies"
                  formControlName="allergies"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Age of diagnose </mat-label>
                <input
                  matInput
                  placeholder="Age"
                  formControlName="ageofdiagnose"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Note </mat-label>
                <input matInput placeholder="Note" formControlName="note" />
              </mat-form-field>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button
              [disabled]="medicalHistoryForm.invalid"
              mat-button
              matStepperNext
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="socialHistoryForm">
        <form [formGroup]="socialHistoryForm">
          <ng-template matStepLabel>Social History</ng-template>

          <div class="formArea">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Alcohol Consumption</mat-label>
                <mat-select formControlName="alcohol">
                  <mat-option *ngFor="let item of frequencies" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Smoking Frequency</mat-label>
                <mat-select formControlName="smoking">
                  <mat-option *ngFor="let item of frequencies" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Drugs Consumption</mat-label>
                <mat-select formControlName="drugs">
                  <mat-option *ngFor="let item of frequencies" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Tobaco Consumption</mat-label>
                <mat-select formControlName="tobaco">
                  <mat-option *ngFor="let item of frequencies" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Travels</mat-label>
                <mat-select formControlName="travel">
                  <mat-option *ngFor="let item of frequencies" [value]="item">
                    {{ item }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!-- <div class="col-lg-12  col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Occupation</mat-label>
                <input
                  matInput
                  placeholder="Occupation"
                  formControlName="occupation"
                />
              </mat-form-field>
            </div> -->
          </div>

          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button
              mat-button
              matStepperNext
              [disabled]="socialHistoryForm.invalid"
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="immunizationHistoryForm">
        <form [formGroup]="immunizationHistoryForm">
          <ng-template matStepLabel>Immunizatin History</ng-template>
          <button (click)="addVaccination()" class="removeBtn">Add</button>
          <div class="formArea" formArrayName="vaccination">
            <div
              class="col-lg-12 col-md-12 col-sm-12"
              *ngFor="let item of vaccinationListArray.controls; let i = index"
              [formGroupName]="i"
            >
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>Vaccine Name</mat-label>
                  <input
                    matInput
                    placeholder="Last name, First name"
                    formControlName="vaccine"
                  />
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field class="w-100">
                  <mat-label> Vaccination Date </mat-label>
                  <input
                    matInput
                    [matDatepicker]="picker"
                    (click)="picker.open()"
                    formControlName="date"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
              <button
                class="removeButton"
                (click)="removeVaccination(i)"
                *ngIf="i > 0"
              >
                Remove
              </button>
            </div>
          </div>

          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button
              mat-button
              matStepperNext
              [disabled]="immunizationHistoryForm.invalid"
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="medicationHistoryForm">
        <form [formGroup]="medicationHistoryForm">
          <ng-template matStepLabel>Medication History</ng-template>
          <div class="formArea">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Drug</mat-label>
                <input
                  matInput
                  placeholder="Drug name"
                  formControlName="drug"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Strength </mat-label>
                <input
                  matInput
                  placeholder="100mg"
                  formControlName="strength"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Dose</mat-label>
                <input matInput placeholder="Dose" formControlName="dose" />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Medication Route</mat-label>
                <input
                  matInput
                  placeholder="Oral/Injection"
                  formControlName="medicationroute"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <mat-form-field>
                <mat-label>Direction</mat-label>
                <input
                  matInput
                  placeholder="2 times a day"
                  formControlName="direction"
                />
              </mat-form-field>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button
              mat-button
              matStepperNext
              [disabled]="medicationHistoryForm.invalid"
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="familyHistoryForm">
        <form [formGroup]="familyHistoryForm">
          <ng-template matStepLabel>Family History</ng-template>
          <button class="removeBtn" (click)="addFamily()">Add</button>
          <div class="formArea" formArrayName="familyhistory">
            <div
              class="col-lg-12 col-md-12 col-sm-12"
              *ngFor="let item of familyListArray.controls; let i = index"
              [formGroupName]="i"
            >
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>RelationShip</mat-label>
                  <mat-select formControlName="relationship">
                    <mat-option
                      *ngFor="let item of relationshipList"
                      [value]="item"
                    >
                      {{ item }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>First Name </mat-label>
                  <input
                    matInput
                    placeholder="First Name"
                    formControlName="firstName"
                  />
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>Last Name </mat-label>
                  <input
                    matInput
                    placeholder="Last Name"
                    formControlName="lastName"
                  />
                </mat-form-field>
              </div>

              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>Diagnosis </mat-label>
                  <input
                    matInput
                    placeholder="Diagnosis"
                    formControlName="diagnosis"
                  />
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>Age at diagnose </mat-label>
                  <input
                    matInput
                    placeholder="Age"
                    formControlName="ageofdiagnose"
                  />
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field class="w-100">
                  <mat-label> Date Of Birth </mat-label>
                  <input
                    matInput
                    [matDatepicker]="picker1"
                    (click)="picker.open()"
                    formControlName="dateofbirth"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker1"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field>
                  <mat-label>Note </mat-label>
                  <input matInput placeholder="Note" formControlName="note" />
                </mat-form-field>
              </div>

              <button
                class="removeButton"
                (click)="removeFamily(i)"
                *ngIf="i > 0"
              >
                Remove
              </button>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="stepper.reset()">Reset</button>
            <button
              mat-button
              [disabled]="familyHistoryForm.invalid"
              (click)="submitAllDetails()"
            >
              Submit
            </button>
          </div>
        </form>
      </mat-step>
    </mat-horizontal-stepper>
  </div>
</div>
